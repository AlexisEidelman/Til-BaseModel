entities:
    person:          
        processes:      
            # le programme est pense pour faire tourner d'abord entree chomage et ensuite entree_emploi
            work:
              - workstate: if(pers2fut.workstate != workstate and pers2fut.workstate != -1, 
                      pers2fut.workstate,
                      workstate)
              - sali: if(ISINWORK and pers2fut.sali != -1, 
                      pers2fut.sali,
                      sali)
              - assertTrue( count(ISINWORK and pers2fut.sali == -1) == 0 )
              

            retraite: 
                - rsti: if(ISRETIRED, 
                             if(BEGINER, 0.7*sali, rsti), 
                          0)
                - salaire_annee_derniere : lag(sali,1)
                - max_age_child: max( invl_mere.max(age), invl_pere.max(age))
                - nb_born: invl_mere.count(age <= 20) + invl_pere.count(age <= 20)
                - nb_pac: invl_mere.count(age <= 18) + invl_pere.count(age <= 18)
                - pension: pension_func() #filter=(age>61) #need max_age_child and nb_child
                - test : count(rsti>0)
